<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{dashboard/layout}">
<head>
  <title>Review Detail</title>
</head>
<body>
<div layout:fragment="content">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h3 mb-0 text-gray-800">Review Detail</h1>
    <a class="btn btn-secondary" th:href="@{/dashboard/car-reviews}">Back</a>
  </div>

  <div class="card shadow">
    <div class="card-body">

      <p>
        <b>Car:</b>
        <span th:text="${review.carBrand + ' ' + review.carTitle}">Brand Title</span>
      </p>

      <p><b>User:</b> <span th:text="${review.fullName}">Name</span></p>
      <p><b>Email:</b> <span th:text="${review.email != null ? review.email : '-'}">-</span></p>
      <p><b>Rating:</b> <span th:text="${review.rating}">5</span>/5</p>

      <p><b>Status:</b>
        <span class="badge"
              th:classappend="${review.isActive} ? ' badge-success' : ' badge-secondary'"
              th:text="${review.isActive} ? 'ACTIVE' : 'INACTIVE'">
        </span>
      </p>

      <p><b>Date:</b>
        <span th:text="${review.createdAt != null ? #temporals.format(review.createdAt, 'yyyy-MM-dd HH:mm') : '-'}">-</span>
      </p>

      <hr>

      <p><b>Message</b></p>
      <div class="p-3"
           style="border:1px solid rgba(0,0,0,.08); border-radius:10px; white-space:pre-wrap;"
           th:text="${review.message != null ? review.message : '-'}">
        message
      </div>

      <hr>

      <div class="d-flex gap-2">
        <form th:action="@{/dashboard/car-reviews/{id}/toggle(id=${review.id})}" method="post">
          <button class="btn btn-warning" type="submit"
                  th:text="${review.isActive} ? 'Deactivate' : 'Activate'">
            Toggle
          </button>
        </form>

        <form th:action="@{/dashboard/car-reviews/{id}/delete(id=${review.id})}" method="post">
          <button class="btn btn-danger" type="submit"
                  onclick="return confirm('Delete this review permanently?')">
            Delete
          </button>
        </form>
      </div>

    </div>
  </div>

</div>
</body>
</html>
