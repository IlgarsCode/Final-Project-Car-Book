<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{dashboard/layout}">
<head>
    <title>Maşınlar</title>
</head>
<body>
<div layout:fragment="content">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="h3 mb-0 text-gray-800">Maşınlar</h1>
        <a class="btn btn-primary" th:href="@{/dashboard/cars/create}">+ Yarat</a>
    </div>

    <div class="card shadow mb-4">
        <div class="card-body table-responsive">

            <table class="table table-bordered table-hover">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Şəkil</th>
                    <th>Brend</th>
                    <th>Model</th>
                    <th>Kateqoriya</th>
                    <th>Seqment</th>
                    <th>Slug</th>
                    <th>Aktiv</th>
                    <th style="width: 160px;">Əməliyyatlar</th>
                </tr>
                </thead>

                <tbody>
                <tr th:if="${cars == null || #lists.isEmpty(cars)}">
                    <td colspan="9" class="text-center">Hələ maşın yoxdur.</td>
                </tr>

                <tr th:each="c, i : ${cars}">
                    <td th:text="${i.count}">1</td>

                    <td>
                        <img th:if="${c.imageUrl != null}" th:src="@{${c.imageUrl}}"
                             style="width:70px;height:45px;object-fit:cover;border-radius:6px;">
                        <span th:if="${c.imageUrl == null}">-</span>
                    </td>

                    <td th:text="${c.brand}">Brand</td>
                    <td th:text="${c.title}">Title</td>

                    <td th:text="${c.category != null ? c.category.name : '-'}">-</td>

                    <td th:text="${c.segment != null ? c.segment.name : '-'}">-</td>

                    <td th:text="${c.slug}">slug</td>

                    <td>
                        <span class="badge"
                              th:classappend="${c.isActive} ? ' badge-success' : ' badge-secondary'"
                              th:text="${c.isActive} ? 'AKTİV' : 'DEAKTİV'">
                        </span>
                    </td>

                    <td>
                        <a class="btn btn-sm btn-info"
                           th:href="@{/dashboard/cars/edit/{id}(id=${c.id})}">
                            Redaktə et
                        </a>

                        <form th:action="@{/dashboard/cars/delete/{id}(id=${c.id})}"
                              method="post" style="display:inline;">

                            <th:block th:if="${_csrf != null}">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                            </th:block>

                            <button class="btn btn-sm btn-warning"
                                    onclick="return confirm('Bu maşın deaktiv edilsin?')">
                                Deaktiv et
                            </button>
                        </form>

                        <form th:action="@{/dashboard/cars/hard-delete/{id}(id=${c.id})}"
                              method="post" style="display:inline;">

                            <th:block th:if="${_csrf != null}">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                            </th:block>

                            <button class="btn btn-sm btn-danger"
                                    onclick="return confirm('SƏRT SİLİNSİN? Bu geri qaytarılmır!')">
                                Sərt sil
                            </button>
                        </form>
                    </td>
                </tr>
                </tbody>

            </table>

        </div>
    </div>

</div>
</body>
</html>