<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title th:text="${car.title}">Car Details</title>
</head>
<body>
<div layout:fragment="content">

    <!-- ✅ BANNER -->
    <section class="hero-wrap hero-wrap-2 js-fullheight"
             th:if="${banner != null}"
             th:style="'background-image: url(' + ${banner.photoUrl} + ');'"
             data-stellar-background-ratio="0.5">
        <div class="overlay"></div>
        <div class="container">
            <div class="row no-gutters slider-text js-fullheight align-items-end justify-content-start">
                <div class="col-md-9 ftco-animate pb-5">
                    <p class="breadcrumbs">
                        <span class="mr-2">
                            <a th:href="@{/}">Home <i class="ion-ios-arrow-forward"></i></a>
                        </span>
                        <span>Car details <i class="ion-ios-arrow-forward"></i></span>
                    </p>
                    <h1 class="mb-3 bread" th:text="${banner.title}">Car Details</h1>
                    <p th:text="${banner.description}"></p>
                </div>
            </div>
        </div>
    </section>

    <section class="ftco-section ftco-car-details">
        <div class="container">

            <div class="row justify-content-center">
                <div class="col-md-12">
                    <div class="car-details">
                        <div class="img rounded"
                             th:style="'background-image: url(' + ${car.imageUrl} + ');'">
                        </div>

                        <div class="text text-center">
                            <span class="subheading" th:text="${car.brand}">Brand</span>
                            <h2 th:text="${car.title}">Title</h2>

                            <!-- ✅ Pricing əsas qiymət (default daily, pricingdən gələndə selected) -->
                            <p class="price mt-2">
                                <span th:text="${car.displayPrice}">0</span>
                                <span th:text="${car.displayUnit}">/per day</span>
                            </p>

                        </div>

                        <!-- ✅ Buttons -->
                        <div class="d-flex justify-content-center mt-3">
                            <form th:action="@{/cart/add}" method="post" class="mr-2">
                                <input type="hidden" name="carId" th:value="${car.id}">
                                <!-- ✅ seçilmiş rate cart-a keçsin -->
                                <input type="hidden" name="rate" th:value="${car.selectedRate != null ? car.selectedRate : 'DAILY'}">
                                <button type="submit" class="btn btn-primary py-2 px-4">Book now</button>
                            </form>

                            <a th:href="@{/cart}" class="btn btn-secondary py-2 px-4">View cart</a>
                        </div>

                    </div>
                </div>
            </div>

            <!-- ✅ ICON STATISTICS -->
            <div class="row">
                <div class="col-md d-flex align-self-stretch ftco-animate">
                    <div class="media block-6 services">
                        <div class="media-body py-md-4">
                            <div class="d-flex mb-3 align-items-center">
                                <div class="icon d-flex align-items-center justify-content-center">
                                    <span class="flaticon-dashboard"></span>
                                </div>
                                <div class="text">
                                    <h3 class="heading mb-0 pl-3">
                                        Mileage
                                        <span th:text="${car.mileage != null ? car.mileage : '-'}">40,000</span>
                                    </h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md d-flex align-self-stretch ftco-animate">
                    <div class="media block-6 services">
                        <div class="media-body py-md-4">
                            <div class="d-flex mb-3 align-items-center">
                                <div class="icon d-flex align-items-center justify-content-center">
                                    <span class="flaticon-pistons"></span>
                                </div>
                                <div class="text">
                                    <h3 class="heading mb-0 pl-3">
                                        Transmission
                                        <span th:text="${car.transmission != null ? car.transmission : '-'}">Manual</span>
                                    </h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md d-flex align-self-stretch ftco-animate">
                    <div class="media block-6 services">
                        <div class="media-body py-md-4">
                            <div class="d-flex mb-3 align-items-center">
                                <div class="icon d-flex align-items-center justify-content-center">
                                    <span class="flaticon-car-seat"></span>
                                </div>
                                <div class="text">
                                    <h3 class="heading mb-0 pl-3">
                                        Seats
                                        <span th:text="${car.seats != null ? car.seats : '-'}">5 Adults</span>
                                    </h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md d-flex align-self-stretch ftco-animate">
                    <div class="media block-6 services">
                        <div class="media-body py-md-4">
                            <div class="d-flex mb-3 align-items-center">
                                <div class="icon d-flex align-items-center justify-content-center">
                                    <span class="flaticon-backpack"></span>
                                </div>
                                <div class="text">
                                    <h3 class="heading mb-0 pl-3">
                                        Luggage
                                        <span th:text="${car.luggage != null ? car.luggage : '-'}">4 Bags</span>
                                    </h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md d-flex align-self-stretch ftco-animate">
                    <div class="media block-6 services">
                        <div class="media-body py-md-4">
                            <div class="d-flex mb-3 align-items-center">
                                <div class="icon d-flex align-items-center justify-content-center">
                                    <span class="flaticon-diesel"></span>
                                </div>
                                <div class="text">
                                    <h3 class="heading mb-0 pl-3">
                                        Fuel
                                        <span th:text="${car.fuel != null ? car.fuel : '-'}">Petrol</span>
                                    </h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ✅ TABS (sənin kimi qalır) -->
            <!-- ... (burdan aşağı hamısı səndəki kimi qala bilər) ... -->

        </div>
    </section>

    <!-- ✅ RELATED CARS -->
    <section class="ftco-section ftco-no-pt">
        <div class="container">

            <div class="row justify-content-center">
                <div class="col-md-12 heading-section text-center ftco-animate mb-5">
                    <span class="subheading">Choose Car</span>
                    <h2 class="mb-2">Related Cars</h2>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4" th:each="rc : ${relatedCars}">
                    <div class="car-wrap rounded ftco-animate">

                        <div class="img rounded d-flex align-items-end"
                             th:style="'background-image: url(' + ${rc.imageUrl} + ');'">
                        </div>

                        <div class="text">
                            <h2 class="mb-0">
                                <a th:href="@{'/car/' + ${rc.slug}}"
                                   th:text="${rc.title}">Car</a>
                            </h2>

                            <div class="d-flex mb-3">
                                <span class="cat" th:text="${rc.brand}">Brand</span>
                                <p class="price ml-auto">
                                    $<span th:text="${rc.dailyRate}">0</span> <span>/day</span>
                                </p>
                            </div>

                            <div class="d-flex mb-0 d-block">
                                <form th:action="@{/cart/add}" method="post" class="mr-1">
                                    <input type="hidden" name="carId" th:value="${rc.id}">
                                    <input type="hidden" name="rate" value="DAILY">
                                    <button type="submit" class="btn btn-primary py-2">Book now</button>
                                </form>

                                <a th:href="@{'/car/' + ${rc.slug}}"
                                   class="btn btn-secondary py-2 ml-1">Details</a>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>
    </section>

</div>
</body>
</html>
